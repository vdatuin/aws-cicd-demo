databaseChangeLog:
  - include:
      file: shared/000-prereqs-and-extensions.sql
      relativeToChangelogFile: true

  # Customer
  - include: { file: customer/001-init-customer.sql, relativeToChangelogFile: true }
  - include: { file: customer/R-customer-views-and-grants.sql, relativeToChangelogFile: true }

  # Orders
  - include: { file: orders/001-init-orders.sql, relativeToChangelogFile: true }
  - include: { file: orders/002-add-order-status.sql, relativeToChangelogFile: true }
  - include: { file: orders/003-idx-orders-customer-date.sql, relativeToChangelogFile: true }

  # Products (create + seed first)
  - include: { file: products/001-init-products.sql, relativeToChangelogFile: true }
  - include: { file: products/002-insert-products.sql, relativeToChangelogFile: true }
  # Add FK after orders exist (and after product seed)
  - include: { file: products/003-fk-orders-product_sku.sql, relativeToChangelogFile: true }
  - include: { file: products/R-product-views-and-grants.sql, relativeToChangelogFile: true }

  # Procedures / cross-domain routines
  - include: { file: procedures/004-proc-recalc-customer-stats.sql, relativeToChangelogFile: true }
