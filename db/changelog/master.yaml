databaseChangeLog:
  # Ensure the role exists first
  - include: { file: shared/001-roles.sql,                     relativeToChangelogFile: true }

  - include: { file: shared/000-prereqs-and-extensions.sql,    relativeToChangelogFile: true }

  # Base tables
  - include: { file: customer/001-init-customer.sql,           relativeToChangelogFile: true }
  - include: { file: orders/001-init-orders.sql,               relativeToChangelogFile: true }
  - include: { file: orders/002-add-order-status.sql,          relativeToChangelogFile: true }
  - include: { file: orders/003-idx-orders-customer-date.sql,  relativeToChangelogFile: true }
  - include: { file: orders/004-ux-orders-customer-date-sku.sql, relativeToChangelogFile: true }

  # Products
  - include: { file: products/001-init-products.sql,           relativeToChangelogFile: true }
  - include: { file: products/002-insert-products.sql,         relativeToChangelogFile: true }
  - include: { file: products/003-fk-orders-product_sku.sql,   relativeToChangelogFile: true }

  # Views & grants (these depend on the role)
  - include: { file: customer/R-customer-views-and-grants.sql, relativeToChangelogFile: true }
  - include: { file: products/R-product-views-and-grants.sql,  relativeToChangelogFile: true }

  # Procedures
  - include: { file: procedures/004-proc-recalc-customer-stats.sql, relativeToChangelogFile: true }
